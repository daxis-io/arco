   Compiling arco-core v0.1.0 (/Users/ethanurbanski/arco/.worktrees/codex-prod-go-closure-batch3/crates/arco-core)
   Compiling arco-flow v0.1.0 (/Users/ethanurbanski/arco/.worktrees/codex-prod-go-closure-batch3/crates/arco-flow)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 4.98s
     Running unittests src/lib.rs (target/debug/deps/arco_flow-b992b427b0c3397d)

running 438 tests
test dag::tests::empty_dag_has_no_nodes ... ok
test dispatch::cloud_tasks::tests::config_builder_pattern ... ok
test dispatch::cloud_tasks::tests::config_disables_queue_retry_updates ... ok
test dispatch::cloud_tasks::tests::config_queue_path ... ok
test dispatch::cloud_tasks::tests::retry_config_defaults ... ok
test dispatch::cloud_tasks::tests::placeholder_tests::dispatcher_validates_config ... ok
test dag::tests::toposort_determinism_independent_of_insertion_permutation ... ok
test dag::tests::linear_dag_sorts_correctly ... ok
test dag::tests::cycle_detection_reports_path_for_self_loop ... ok
test dag::tests::roots_returns_nodes_in_insertion_order ... ok
test dag::tests::single_node_dag ... ok
test dag::tests::leaves_returns_nodes_in_insertion_order ... ok
test dag::tests::dag_returns_upstream_dependencies_in_insertion_order ... ok
test dag::tests::dag_detects_cycle ... ok
test dag::tests::toposort_by_key_with_complex_dag ... ok
test dag::tests::toposort_is_deterministic_with_multiple_roots ... ok
test dag::tests::dag_returns_downstream_dependents_in_insertion_order ... ok
test dag::tests::cycle_detection_reports_full_path ... ok
test dag::tests::toposort_by_key_regardless_of_insertion_order ... ok
test dispatch::memory::tests::queue_name ... ok
test dispatch::tests::enqueue_result_for_status_deduplicates_on_already_exists ... ok
test dispatch::tests::enqueue_result_for_status_ignores_other_codes ... ok
test dispatch::tests::enqueue_options_builder ... ok
test dispatch::tests::enqueue_result_for_status_marks_queue_full ... ok
test dispatch::tests::enqueue_result_is_enqueued ... ok
test dispatch::tests::enqueue_result_message_id ... ok
test dispatch::memory::tests::different_attempts_are_distinct ... ok
test dispatch::memory::tests::clear_resets_state ... ok
test dispatch::memory::tests::enqueue_batch ... ok
test dispatch::memory::tests::deduplication ... ok
test dispatch::memory::tests::capacity_limit ... ok
test dispatch::memory::tests::peek_does_not_remove ... ok
test dispatch::memory::tests::drain_clears_queue ... ok
test dispatch::memory::tests::enqueue_and_take ... ok
test dispatch::tests::task_envelope_idempotency_key ... ok
test error::tests::plan_error_display ... ok
test error::tests::state_transition_error_display ... ok
test error::tests::storage_error_with_source ... ok
test error::tests::task_error_display ... ok
test events::tests::event_builder_creates_valid_envelopes ... ok
test events::tests::event_data_extracts_ids ... ok
test events::tests::event_envelope_has_cloudevents_attributes ... ok
test events::tests::event_envelope_serializes_cloudevents_format ... ok
test events::tests::event_idempotency_key_is_deterministic ... ok
test events::tests::heartbeat_event_creates_correctly ... ok
test dispatch::tests::task_envelope_serializes ... ok
test events::tests::run_started_envelope_serializes ... ok
test events::tests::run_started_event_serializes ... ok
test events::tests::task_completed_envelope_serializes ... ok
test events::tests::task_completed_event_serializes ... ok
test events::tests::envelopes_roundtrip_through_json ... ok
test leader::memory::tests::cannot_acquire_when_another_holds_lease ... ok
test leader::memory::tests::acquire_leadership_when_no_leader ... ok
test leader::memory::tests::current_leader_when_no_lease ... ok
test leader::memory::tests::multiple_lock_keys_are_independent ... ok
test leader::memory::tests::release_leadership ... ok
test leader::memory::tests::release_with_wrong_token ... ok
test leader::memory::tests::renew_nonexistent_lease ... ok
test leader::memory::tests::renew_allows_multiple_renewals_with_same_token ... ok
test leader::memory::tests::renew_preserves_token_for_release ... ok
test leader::memory::tests::renew_with_invalid_token ... ok
test leader::memory::tests::renew_with_valid_token ... ok
test leader::tests::leadership_result_is_leader ... ok
test leader::memory::tests::same_instance_can_reacquire ... ok
test leader::tests::leadership_result_lease_token ... ok
test leader::tests::renewal_result_is_renewed ... ok
test metrics::tests::flow_metrics_can_record_transitions ... ok
test metrics::tests::flow_metrics_can_observe_durations ... ok
test metrics::tests::flow_metrics_can_set_gauges ... ok
test orchestration::callbacks::handlers::tests::test_handle_heartbeat_invalid_progress_pct ... ok
test orchestration::callbacks::handlers::tests::test_handle_heartbeat_attempt_id_mismatch ... ok
test orchestration::callbacks::handlers::tests::test_handle_heartbeat_terminal_returns_gone ... ok
test orchestration::callbacks::handlers::tests::test_handle_heartbeat_sets_server_timestamp ... ok
test orchestration::callbacks::handlers::tests::test_handle_task_completed_attempt_id_mismatch ... ok
test orchestration::callbacks::handlers::tests::test_handle_heartbeat_with_cancel ... ok
test orchestration::callbacks::handlers::tests::test_handle_task_completed_failure ... ok
test orchestration::callbacks::handlers::tests::test_handle_task_completed_allows_partial_output_on_failure ... ok
test orchestration::callbacks::handlers::tests::test_handle_task_started_attempt_id_mismatch ... ok
test orchestration::callbacks::handlers::tests::test_handle_task_completed_success ... ok
test orchestration::callbacks::handlers::tests::test_handle_task_started_attempt_mismatch ... ok
test orchestration::callbacks::handlers::tests::test_handle_task_started_cancel_requested ... ok
test orchestration::callbacks::handlers::tests::test_handle_task_started_invalid_token ... ok
test orchestration::callbacks::handlers::tests::test_handle_task_started_not_found ... ok
test orchestration::callbacks::types::tests::test_callback_error_variants ... ok
test orchestration::callbacks::types::tests::test_callback_result_status_codes ... ok
test orchestration::callbacks::handlers::tests::test_handle_task_started_terminal ... ok
test orchestration::callbacks::handlers::tests::test_handle_task_started_success ... ok
test orchestration::callbacks::types::tests::test_error_category_default_retryable ... ok
test orchestration::callbacks::types::tests::test_heartbeat_request_optional_fields ... ok
test orchestration::callbacks::types::tests::test_task_completed_failure ... ok
test orchestration::callbacks::types::tests::test_task_error_effective_retryable ... ok
test orchestration::callbacks::types::tests::test_task_completed_success ... ok
test orchestration::callbacks::types::tests::test_task_started_request_serialization ... ok
test orchestration::compactor::fold::tests::test_cloud_task_id_is_deterministic ... ok
test orchestration::compactor::fold::tests::test_cloud_task_id_is_unique ... ok
test orchestration::compactor::fold::tests::test_cloud_task_id_format ... ok
test orchestration::compactor::fold::tests::test_cron_timer_id ... ok
test orchestration::compactor::fold::tests::test_dispatch_cloud_task_id ... ok
test orchestration::compactor::fold::tests::test_dispatch_id_format ... ok
test orchestration::compactor::fold::tests::test_cancelled_task_cascades_and_cancels_run ... ok
test orchestration::compactor::fold::tests::test_dispatch_enqueued_updates_outbox_row ... ok
test orchestration::compactor::fold::tests::test_dispatch_out_of_order_events_do_not_regress ... ok
test orchestration::compactor::fold::tests::test_dispatch_out_of_order_fills_attempt_id ... ok
test orchestration::compactor::fold::tests::test_dispatch_outbox_serialization ... ok
test orchestration::compactor::fold::tests::test_dispatch_requested_creates_outbox_row ... ok
test orchestration::compactor::fold::tests::test_duplicate_dispatch_requested_does_not_override_attempt_id ... ok
test orchestration::compactor::fold::tests::test_duplicate_task_finished_does_not_double_increment ... ok
test orchestration::compactor::fold::tests::test_duplicate_task_finished_does_not_double_increment_run_counters ... ok
test orchestration::compactor::fold::tests::test_fold_backfill_created_inserts_backfill ... ok
test orchestration::compactor::fold::tests::test_fold_backfill_chunk_planned_updates_chunks_and_backfill ... ok
test orchestration::compactor::fold::tests::test_fold_backfill_state_changed_rejects_invalid_version ... ok
test orchestration::compactor::fold::tests::test_fold_backfill_state_changed_updates_state ... ok
test orchestration::compactor::fold::tests::test_fold_plan_created_initializes_tasks ... ok
test orchestration::compactor::fold::tests::test_fold_schedule_ticked_failed_status_has_no_run_key ... ok
test orchestration::compactor::fold::tests::test_fold_schedule_ticked_idempotent_with_same_tick_id ... ok
test orchestration::compactor::fold::tests::test_fold_schedule_ticked_is_pure_projection ... ok
test orchestration::compactor::fold::tests::test_fold_schedule_ticked_skipped_status_has_no_run_key ... ok
test orchestration::compactor::fold::tests::test_fold_schedule_ticked_updates_state_and_creates_tick_row ... ok
test orchestration::compactor::fold::tests::test_fold_sensor_evaluated_accepts_on_version_match ... ok
test orchestration::compactor::fold::tests::test_fold_sensor_evaluated_drops_on_version_mismatch ... ok
test orchestration::compactor::fold::tests::test_fold_sensor_evaluated_error_does_not_update_status ... ok
test orchestration::compactor::fold::tests::test_fold_sensor_evaluated_is_pure_projection ... ok
test orchestration::compactor::fold::tests::test_fold_sensor_evaluated_push_bypasses_cas ... ok
test orchestration::compactor::fold::tests::test_heartbeat_timer_id ... ok
test orchestration::compactor::fold::tests::test_fold_sensor_evaluated_updates_state ... ok
test orchestration::compactor::fold::tests::test_merge_dispatch_outbox_rows ... ok
test orchestration::compactor::fold::tests::test_merge_dispatch_outbox_rows_prefers_later_on_equal_row_version ... ok
test orchestration::compactor::fold::tests::test_merge_empty_returns_none ... ok
test orchestration::compactor::fold::tests::test_merge_multiple_deltas ... ok
test orchestration::compactor::fold::tests::test_merge_prefers_later_row_on_equal_rank ... ok
test orchestration::compactor::fold::tests::test_merge_single_row_returns_it ... ok
test orchestration::compactor::fold::tests::test_merge_timer_rows ... ok
test orchestration::compactor::fold::tests::test_merge_timer_rows_prefers_later_on_equal_row_version ... ok
test orchestration::compactor::fold::tests::test_merge_uses_row_version_not_file_order ... ok
test orchestration::compactor::fold::tests::test_merge_uses_state_rank_as_tiebreaker ... ok
test orchestration::compactor::fold::tests::test_parse_timer_id ... ok
test orchestration::compactor::fold::tests::test_partition_status_attempt_only_on_failure ... ok
test orchestration::compactor::fold::tests::test_rebuild_dependency_graph_from_edges ... ok
test orchestration::compactor::fold::tests::test_partition_status_updated_on_task_success ... ok
test orchestration::compactor::fold::tests::test_plan_created_is_idempotent ... ok
test orchestration::compactor::fold::tests::test_run_cancel_requested_does_not_cancel_running_tasks ... ok
test orchestration::compactor::fold::tests::test_run_cancel_requested_cancels_pending_tasks ... ok
test orchestration::compactor::fold::tests::test_run_cancel_requested_preserves_terminal_tasks ... ok
test orchestration::compactor::fold::tests::test_run_triggered_is_idempotent ... ok
test orchestration::compactor::fold::tests::test_run_requested_is_dropped_for_stale_sensor_eval ... ok
test orchestration::compactor::fold::tests::test_task_state_ranks_are_monotonic ... ok
test orchestration::compactor::fold::tests::test_terminal_states ... ok
test orchestration::compactor::fold::tests::test_stale_attempt_event_is_rejected ... ok
test orchestration::compactor::fold::tests::test_task_started_attempt_id_mismatch_is_ignored ... ok
test orchestration::compactor::fold::tests::test_timer_cloud_task_id ... ok
test orchestration::compactor::fold::tests::test_timer_id_includes_epoch_for_uniqueness ... ok
test orchestration::compactor::fold::tests::test_timer_fired_creates_row_from_timer_id ... ok
test orchestration::compactor::fold::tests::test_timer_normal_order_requested_then_enqueued ... ok
test orchestration::compactor::fold::tests::test_timer_out_of_order_enqueued_before_requested ... ok
test orchestration::compactor::fold::tests::test_timer_requested_and_fired_updates_state ... ok
test orchestration::compactor::fold::tests::test_timer_row_serialization ... ok
test orchestration::compactor::manifest::tests::test_l0_compaction_trigger ... ok
test orchestration::compactor::fold::tests::test_upstream_failure_skips_downstream ... ok
test orchestration::compactor::manifest::tests::test_row_counts_total ... ok
test orchestration::compactor::manifest::tests::test_manifest_with_l0_deltas ... ok
test orchestration::compactor::manifest::tests::test_manifest_serialization ... ok
test orchestration::compactor::manifest::tests::test_table_paths_all ... ok
test orchestration::compactor::manifest::tests::test_watermark_freshness ... ok
test orchestration::compactor::fold::tests::test_fold_schedule_ticked_updates_existing_state ... ok
test orchestration::compactor::fold::tests::test_fold_sensor_evaluated_increments_state_version ... ok
test orchestration::compactor::fold::tests::test_partition_status_materialization_only_updates_on_success ... ok
test metrics::tests::timing_guard_elapsed_works ... ok
test orchestration::compactor::parquet_util::tests::test_idempotency_keys_roundtrip ... ok
test orchestration::compactor::parquet_util::tests::test_dep_satisfaction_roundtrip ... ok
test orchestration::compactor::parquet_util::tests::test_read_tasks_defaults_asset_partition_when_missing_columns ... ok
test orchestration::compactor::parquet_util::tests::test_read_tasks_rejects_unknown_state ... ok
test orchestration::compactor::parquet_util::tests::test_read_runs_rejects_unknown_state ... ok
test orchestration::compactor::parquet_util::tests::test_schedule_definitions_roundtrip ... ok
test orchestration::compactor::parquet_util::tests::test_backfill_chunks_roundtrip ... ok
test orchestration::compactor::parquet_util::tests::test_schedule_state_roundtrip ... ok
test orchestration::compactor::parquet_util::tests::test_dispatch_outbox_roundtrip ... ok
test orchestration::compactor::parquet_util::tests::test_partition_status_roundtrip ... ok
test orchestration::compactor::parquet_util::tests::test_backfills_roundtrip ... ok
test orchestration::compactor::service::tests::compact_empty_events_returns_current_manifest ... ok
test orchestration::compactor::parquet_util::tests::test_runs_roundtrip ... ok
test orchestration::compactor::parquet_util::tests::test_read_runs_defaults_cancel_requested_when_missing_column ... ok
test orchestration::compactor::parquet_util::tests::test_sensor_state_roundtrip ... ok
test orchestration::compactor::parquet_util::tests::test_schedule_ticks_roundtrip ... ok
test orchestration::compactor::service::tests::event_priority_orders_trigger_before_run_requested ... ok
test orchestration::compactor::parquet_util::tests::test_sensor_evals_roundtrip ... ok
test orchestration::compactor::parquet_util::tests::test_tasks_roundtrip ... ok
test orchestration::compactor::service::tests::publish_manifest_uses_cas ... ok
test orchestration::compactor::parquet_util::tests::test_timers_roundtrip ... ok
test orchestration::controllers::anti_entropy::tests::test_anti_entropy_guards_against_compaction_lag ... ok
test orchestration::controllers::anti_entropy::tests::test_anti_entropy_ignores_terminal_tasks ... ok
test orchestration::controllers::anti_entropy::tests::test_anti_entropy_ignores_running_tasks ... ok
test orchestration::controllers::anti_entropy::tests::test_anti_entropy_recovers_stuck_dispatched_tasks ... ok
test orchestration::controllers::anti_entropy::tests::test_anti_entropy_recovers_stuck_ready_tasks ... ok
test orchestration::controllers::anti_entropy::tests::test_anti_entropy_redispatches_failed_outbox ... ok
test orchestration::controllers::anti_entropy::tests::test_anti_entropy_skips_recently_ready_tasks ... ok
test orchestration::controllers::anti_entropy::tests::test_anti_entropy_skips_tasks_with_acked_dispatch ... ok
test orchestration::controllers::anti_entropy::tests::test_anti_entropy_skips_tasks_with_pending_dispatch ... ok
test orchestration::controllers::anti_entropy::tests::test_anti_entropy_repairs_dispatched_without_outbox ... ok
test orchestration::controllers::backfill::tests::test_backfill_cancel ... ok
test orchestration::controllers::backfill::tests::test_backfill_chunk_emits_run_requested_atomically ... ok
test orchestration::controllers::backfill::tests::test_backfill_chunk_run_key_is_deterministic ... ok
test orchestration::controllers::backfill::tests::test_backfill_controller_plans_chunks_respecting_concurrency ... ok
test orchestration::controllers::backfill::tests::test_backfill_create_rejects_empty_asset_selection ... ok
test orchestration::controllers::backfill::tests::test_backfill_create_rejects_multiple_assets ... ok
test orchestration::compactor::service::tests::compact_creates_l0_delta_with_state ... ok
test orchestration::controllers::backfill::tests::test_backfill_create_emits_backfill_created_event ... ok
test orchestration::controllers::backfill::tests::test_backfill_pause_is_idempotent_with_expected_version ... ok
test orchestration::controllers::backfill::tests::test_backfill_pause_uses_state_version_for_idempotency ... ok
test orchestration::controllers::backfill::tests::test_backfill_create_uses_compact_selector_not_partition_list ... ok
test orchestration::controllers::backfill::tests::test_backfill_preview_uses_default_chunk_size ... ok
test orchestration::controllers::backfill::tests::test_backfill_reconcile_skips_filter_selector ... ok
test orchestration::controllers::backfill::tests::test_backfill_pause_rejects_invalid_transition ... ok
test orchestration::controllers::backfill::tests::test_backfill_resume_from_paused ... ok
test orchestration::controllers::backfill::tests::test_backfill_preview_returns_partition_count_and_chunks ... ok
test orchestration::controllers::backfill::tests::test_backfill_reconcile_skips_on_stale_watermarks ... ok
test orchestration::compactor::service::tests::compact_orders_watermarks_by_event_id ... ok
test orchestration::controllers::backfill::tests::test_backfill_reconcile_plans_filter_selector_with_start_end_filters ... ok
test orchestration::controllers::backfill::tests::test_backfill_skip_non_running ... ok
test orchestration::controllers::dispatch::tests::test_cloud_task_id_compliant_characters ... ok
test orchestration::controllers::backfill::tests::test_retry_failed_creates_new_backfill_with_parent ... ok
test orchestration::controllers::backfill::tests::test_retry_failed_is_idempotent_with_retry_request_id ... ok
test orchestration::controllers::dispatch::tests::test_cloud_task_id_different_prefixes ... ok
test orchestration::controllers::backfill::tests::test_retry_failed_rejects_non_failed_parent ... ok
test orchestration::controllers::dispatch::tests::test_cloud_task_id_format ... ok
test orchestration::controllers::dispatch::tests::test_cloud_task_id_is_deterministic ... ok
test orchestration::controllers::dispatch::tests::test_cloud_task_id_is_unique ... ok
test orchestration::controllers::dispatch::tests::test_cron_timer_internal_id ... ok
test orchestration::controllers::dispatch::tests::test_dispatch_internal_id ... ok
test orchestration::controllers::dispatch::tests::test_end_to_end_dispatch_id_generation ... ok
test orchestration::controllers::dispatch::tests::test_heartbeat_timer_internal_id ... ok
test orchestration::controllers::dispatch::tests::test_retry_timer_internal_id ... ok
test orchestration::controllers::dispatcher::tests::test_dispatch_enqueued_idempotency_key ... ok
test orchestration::controllers::dispatcher::tests::test_cloud_task_id_different_for_different_attempts ... ok
test orchestration::controllers::dispatcher::tests::test_dispatcher_creates_cloud_tasks_for_pending_outbox ... ok
test orchestration::controllers::dispatcher::tests::test_dispatcher_guards_against_compaction_lag ... ok
test orchestration::controllers::dispatcher::tests::test_dispatch_payload_serialization ... ok
test orchestration::controllers::dispatcher::tests::test_dispatcher_is_deterministic ... ok
test orchestration::controllers::dispatcher::tests::test_dispatcher_skips_acked ... ok
test orchestration::controllers::partition_status::tests::test_staleness_computed_at_query_time ... ok
test orchestration::controllers::dispatcher::tests::test_dispatcher_skips_already_created ... ok
test orchestration::controllers::partition_status::tests::test_staleness_detects_code_changed ... ok
test orchestration::controllers::partition_status::tests::test_staleness_detects_upstream_changed ... ok
test orchestration::controllers::partition_status::tests::test_staleness_detects_upstream_never_materialized ... ok
test orchestration::controllers::partition_status::tests::test_staleness_fresh_partition ... ok
test orchestration::controllers::partition_status::tests::test_staleness_fresh_with_older_upstream ... ok
test orchestration::controllers::partition_status::tests::test_staleness_never_materialized ... ok
test orchestration::controllers::partition_status::tests::test_staleness_with_upstreams_checks_freshness_policy ... ok
test orchestration::controllers::ready_dispatch::tests::test_action_converts_to_event_data ... ok
test orchestration::controllers::ready_dispatch::tests::test_dispatch_requested_idempotency_key ... ok
test orchestration::controllers::ready_dispatch::tests::test_ready_dispatch_different_tasks_get_different_attempt_ids ... ok
test orchestration::controllers::ready_dispatch::tests::test_ready_dispatch_emits_for_ready_tasks ... ok
test orchestration::controllers::ready_dispatch::tests::test_ready_dispatch_guards_against_compaction_lag ... ok
test orchestration::controllers::ready_dispatch::tests::test_ready_dispatch_generates_deterministic_attempt_ids ... ok
test orchestration::controllers::ready_dispatch::tests::test_ready_dispatch_handles_multiple_ready_tasks ... ok
test orchestration::controllers::ready_dispatch::tests::test_ready_dispatch_skips_non_ready_tasks ... ok
test orchestration::controllers::ready_dispatch::tests::test_ready_dispatch_skips_cancel_requested_runs ... ok
test orchestration::controllers::ready_dispatch::tests::test_ready_dispatch_skips_tasks_with_created_dispatch ... ok
test orchestration::controllers::ready_dispatch::tests::test_ready_dispatch_skips_tasks_with_pending_dispatch ... ok
test orchestration::controllers::ready_dispatch::tests::test_skip_action_does_not_convert_to_event ... ok
test orchestration::controllers::schedule::tests::test_request_fingerprint_is_deterministic ... ok
test orchestration::controllers::schedule::tests::test_schedule_controller_emits_paused_tick_when_disabled ... ok
test orchestration::controllers::schedule::tests::test_schedule_manual_trigger_creates_tick_and_run_request ... ok
test orchestration::controllers::schedule::tests::test_schedule_controller_accepts_five_field_cron ... ok
test orchestration::controllers::schedule::tests::test_schedule_controller_emits_tick_and_run_requested_atomically ... ok
test orchestration::controllers::schedule::tests::test_schedule_controller_handles_dst_fall_back ... ok
test orchestration::controllers::schedule::tests::test_schedule_ticked_skipped_has_no_run_key ... ok
test orchestration::controllers::schedule::tests::test_schedule_controller_clamps_catchup_window ... ok
test orchestration::controllers::schedule::tests::test_schedule_controller_emits_tick_when_due ... ok
test orchestration::controllers::schedule::tests::test_tick_id_format_uses_stable_id ... ok
test leader::memory::tests::expired_lease_can_be_taken ... ok
test orchestration::controllers::sensor::tests::test_poll_sensor_respects_min_interval ... ok
test orchestration::controllers::sensor::tests::test_poll_sensor_emits_eval_with_cas_fields ... ok
test orchestration::controllers::sensor::tests::test_poll_sensor_idempotency_uses_cursor_before ... ok
test orchestration::controllers::sensor::tests::test_poll_sensor_skips_error_sensor ... ok
test orchestration::controllers::schedule::tests::test_schedule_controller_respects_max_catchup ... ok
test orchestration::controllers::sensor::tests::test_poll_sensor_error_preserves_cursor ... ok
test orchestration::controllers::sensor::tests::test_poll_sensor_skips_paused_sensor ... ok
test orchestration::compactor::service::tests::compact_persists_out_of_order_timer_fire_at ... ok
test orchestration::controllers::sensor::tests::test_push_sensor_handler_emits_eval_and_run_requests_atomically ... ok
test orchestration::controllers::sensor::tests::test_push_sensor_skips_when_paused_or_error ... ok
test orchestration::controllers::sensor::tests::test_push_sensor_is_cursorless_by_default ... ok
test orchestration::compactor::service::tests::compact_persists_out_of_order_dispatch_fields ... ok
test orchestration::controllers::sensor::tests::test_push_sensor_uses_message_id_for_idempotency ... ok
test orchestration::controllers::timer::tests::test_timer_controller_creates_timers_for_scheduled ... ok
test orchestration::controllers::sensor::tests::test_sensor_manual_evaluate_with_sample_payload ... ok
test orchestration::controllers::timer::tests::test_timer_controller_guards_against_compaction_lag ... ok
test orchestration::controllers::timer::tests::test_timer_controller_handles_different_timer_types ... ok
test orchestration::controllers::timer::tests::test_timer_controller_skips_already_created ... ok
test orchestration::controllers::timer::tests::test_timer_controller_skips_fired ... ok
test orchestration::controllers::timer::tests::test_timer_enqueued_idempotency_key ... ok
test orchestration::controllers::timer_handlers::tests::test_heartbeat_check_fails_when_compaction_fresh ... ok
test orchestration::controllers::timer_handlers::tests::test_heartbeat_check_guards_against_compaction_lag ... ok
test orchestration::controllers::timer_handlers::tests::test_heartbeat_noop_for_terminal_task ... ok
test orchestration::controllers::timer_handlers::tests::test_heartbeat_reschedules_for_healthy_task ... ok
test orchestration::controllers::timer_handlers::tests::test_heartbeat_reschedules_when_attempt_id_missing ... ok
test orchestration::controllers::timer_handlers::tests::test_heartbeat_reschedules_when_no_heartbeat_yet ... ok
test orchestration::controllers::timer_handlers::tests::test_retry_different_attempts_get_different_attempt_ids ... ok
test orchestration::controllers::timer_handlers::tests::test_retry_generates_deterministic_attempt_id ... ok
test orchestration::controllers::timer_handlers::tests::test_retry_noop_for_terminal_task ... ok
test orchestration::controllers::timer_handlers::tests::test_retry_noop_when_max_attempts_reached ... ok
test orchestration::controllers::timer_handlers::tests::test_retry_noop_when_not_in_retry_wait ... ok
test orchestration::controllers::timer_handlers::tests::test_retry_timer_increments_when_compaction_fresh ... ok
test orchestration::controllers::timer_handlers::tests::test_retry_timer_respects_watermark_freshness ... ok
test orchestration::events::automation_events::tests::test_sensor_eval_status_serialization ... ok
test orchestration::compactor::service::tests::fold_state_survives_roundtrip_through_parquet ... ok
test orchestration::events::automation_events::tests::test_sha256_hex ... ok
test orchestration::events::automation_events::tests::test_tick_status_serialization ... ok
test orchestration::events::automation_events::tests::test_trigger_source_serialization ... ok
test orchestration::events::backfill_events::tests::test_backfill_state_transitions ... ok
test orchestration::events::backfill_events::tests::test_backfill_terminal_states ... ok
test orchestration::events::backfill_events::tests::test_partition_selector_serialization ... ok
test orchestration::events::tests::test_idempotency_key_with_run_key ... ok
test orchestration::events::tests::test_event_envelope_creation ... ok
test orchestration::events::tests::test_task_finished_idempotency_key ... ok
test orchestration::ids::tests::test_cloud_task_id_format ... ok
test orchestration::ids::tests::test_deterministic_attempt_id_differs_for_different_dispatches ... ok
test orchestration::ids::tests::test_deterministic_attempt_id_is_stable ... ok
test orchestration::ids::tests::test_different_run_keys_produce_different_ids ... ok
test metrics::tests::timing_guard_measures_duration ... ok
test orchestration::ids::tests::test_different_secrets_produce_different_ids ... ok
test orchestration::ids::tests::test_different_tenants_produce_different_ids ... ok
test orchestration::ids::tests::test_run_id_format ... ok
test orchestration::ids::tests::test_different_workspaces_produce_different_ids ... ok
test orchestration::ids::tests::test_run_id_is_deterministic ... ok
test orchestration::ledger::tests::duplicate_writes_are_idempotent ... ok
test orchestration::run_key::tests::test_get_reservation_not_found ... ok
test orchestration::ledger::tests::writes_event_to_ledger_path ... ok
test orchestration::run_key::tests::test_reservation_path_differs_for_different_keys ... ok
test orchestration::run_key::tests::test_get_reservation_found ... ok
test orchestration::run_key::tests::test_reservation_path_is_deterministic ... ok
test orchestration::run_key::tests::test_reservation_path_format ... ok
test orchestration::ledger::tests::batch_writes_multiple_events ... ok
test orchestration::run_key::tests::test_reservation_serialization_roundtrip ... ok
test orchestration::run_key::tests::test_reserve_run_key_both_none_fingerprints_match ... ok
test orchestration::run_key::tests::test_reserve_run_key_duplicate_returns_existing ... ok
test orchestration::run_key::tests::test_reserve_run_key_detects_fingerprint_mismatch ... ok
test orchestration::run_key::tests::test_reserve_run_key_missing_fingerprint_is_lenient ... ok
test orchestration::run_key::tests::test_reserve_run_key_missing_fingerprint_is_strict_after_cutoff ... ok
test plan::tests::asset_key_canonical_string_uses_slash_separator ... ok
test orchestration::run_key::tests::test_reserve_run_key_success ... ok
test orchestration::run_key::tests::test_reserve_run_key_same_fingerprint_is_not_mismatch ... ok
test outbox::tests::ledger_writer_writes_events_under_domain_date_prefix ... ok
test outbox::tests::ledger_writer_recovers_after_partial_batch_write_failure ... ok
test plan::tests::plan_builder_creates_valid_plan ... ok
test orchestration::compactor::service::tests::compact_writes_delta_rows_only ... ok
test plan::tests::plan_detects_cycles ... ok
test plan::tests::plan_builder_computes_stages ... ok
test plan::tests::plan_validates_dependencies_exist ... ok
test plan::tests::plan_fingerprint_is_deterministic ... ok
test plan::tests::fingerprint_upstream_identity_includes_partition_key ... ok
test quota::drr::tests::drr_deficit_tracking ... ok
test plan::tests::plan_sorts_tasks_topologically ... ok
test quota::drr::tests::drr_deterministic_tie_breaking ... ok
test plan::tests::plan_fingerprint_is_structural ... ok
test quota::drr::tests::drr_fair_distribution_equal_weights ... ok
test plan::tests::plan_task_order_is_stable_across_insertion_order ... ok
test quota::drr::tests::drr_handles_empty_tenants ... ok
test quota::drr::tests::drr_updates_weight_for_existing_tenant ... ok
test quota::drr::tests::drr_weighted_distribution ... ok
test quota::drr::tests::drr_work_conservation ... ok
test quota::drr::tests::fair_task_selector_interface ... ok
test quota::memory::tests::allows_dispatch_under_quota ... ok
test quota::memory::tests::allows_unknown_tenant_with_default ... ok
test quota::memory::tests::completion_doesnt_go_negative ... ok
test quota::memory::tests::denies_dispatch_over_quota ... ok
test quota::memory::tests::denies_unknown_tenant_without_default ... ok
test quota::memory::tests::record_dispatch_and_completion ... ok
test quota::memory::tests::record_dispatch_unknown_tenant_without_default_fails ... ok
test quota::memory::tests::set_and_get_quota ... ok
test quota::memory::tests::try_dispatch_reserves_quota ... ok
test quota::tests::quota_decision_is_allowed ... ok
test quota::memory::tests::try_dispatch_unknown_tenant_default_quota ... ok
test quota::tests::quota_denial_reason_display ... ok
test quota::tests::tenant_quota_default ... ok
test quota::tests::tenant_quota_with_weight ... ok
test quota::drr::tests::drr_weighted_fairness_long_run ... ok
test run::tests::run_state_transitions ... ok
test run::tests::run_compute_final_state ... ok
test run::tests::run_initializes_from_plan ... ok
test run::tests::run_ready_tasks_respects_dependencies ... ok
test run::tests::run_tracks_task_progress ... ok
test runner::tests::failing_runner_fails ... ok
test runner::tests::noop_runner_succeeds ... ok
test runner::tests::runner_executes_task ... ok
test scheduler::tests::scheduler_creates_run_from_plan ... ok
test scheduler::tests::scheduler_cancel_run ... ok
test scheduler::tests::scheduler_prioritizes_lower_priority_values ... ok
test scheduler::tests::dispatch_ready_tasks_respects_quota ... ok
test scheduler::tests::dispatch_ready_tasks_enqueues_tasks ... ok
test store::memory::tests::cas_task_state_not_found ... ok
test store::memory::tests::cas_task_state_mismatch ... ok
test scheduler::tests::scheduler_run_lifecycle ... ok
test scheduler::tests::scheduler_skips_downstream_on_failure ... ok
test store::memory::tests::cas_task_state_rejects_invalid_transition ... ok
test store::memory::tests::cas_task_state_success ... ok
test store::memory::tests::get_retry_eligible_tasks ... ok
test store::memory::tests::get_ready_tasks_by_tenant ... ok
test scheduler::tests::scheduler_returns_ready_tasks ... ok
test store::memory::tests::get_retry_eligible_tasks_not_due ... ok
test store::memory::tests::get_ready_tasks_by_tenant_orders_by_priority_and_key ... ok
test store::memory::tests::cas_task_state_sets_transition_timestamps ... ok
test store::memory::tests::get_tasks_by_state ... ok
test store::tests::cas_result_is_not_found ... ok
test scheduler::tests::scheduler_respects_max_parallelism ... ok
test store::tests::cas_result_is_success ... ok
test store::memory::tests::get_zombie_tasks_running ... ok
test store::memory::tests::get_zombie_tasks_dispatched ... ok
test store::memory::tests::run_count ... ok
test task::tests::is_zombie_detects_dispatch_ack_timeout ... ok
test task::tests::is_zombie_detects_heartbeat_timeout ... ok
test task::tests::run_transition_reason_display ... ok
test store::memory::tests::save_and_get_run ... ok
test task::tests::is_zombie_not_for_other_states ... ok
test task::tests::task_execution_heartbeat ... ok
test task::tests::task_execution_invalid_transition_fails ... ok
test task::tests::task_state_full_lifecycle ... ok
test task::tests::task_execution_state_machine ... ok
test task::tests::task_state_transitions_running_to_terminal ... ok
test task::tests::task_timeout_config_default_values ... ok
test task::tests::transition_reason_display ... ok
test task::tests::transition_to_with_reason_tracks_reason ... ok
test task::tests::try_terminal_transition_applies_on_valid_transition ... ok
test task::tests::try_terminal_transition_idempotent_on_same_state ... ok
test task::tests::try_terminal_transition_rejects_different_terminal_state ... ok
test task::tests::try_terminal_transition_rejects_non_terminal_state ... ok
test task_key::tests::task_key_canonical_string_without_partition ... ok
test task::tests::try_terminal_transition_rejects_old_attempt ... ok
test task_key::tests::task_key_display_format ... ok
test task_key::tests::task_key_operation_breaks_ties ... ok
test task_key::tests::task_key_operation_included_in_canonical ... ok
test task_key::tests::task_key_ordering_is_deterministic ... ok
test task_key::tests::task_key_with_partition_orders_correctly ... ok
test task_key::tests::task_operation_default_is_materialize ... ok
test task_key::tests::task_operation_ordering_is_stable ... ok
test orchestration::compactor::service::tests::cold_restart_preserves_layer2_backfills_ticks_and_sensors ... ok
test orchestration::run_key::tests::test_reserve_run_key_precondition_failed_read_retry ... ok
test plan::tests::plan_builder_enforces_task_cap ... ok
test orchestration::run_key::tests::test_reserve_run_key_precondition_failed_read_retry_is_bounded ... ok

test result: ok. 438 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.18s

     Running unittests src/bin/arco_flow_compactor.rs (target/debug/deps/arco_flow_compactor-9295224c25df6874)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running unittests src/bin/arco_flow_dispatcher.rs (target/debug/deps/arco_flow_dispatcher-766693d162866622)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running unittests src/bin/arco_flow_sweeper.rs (target/debug/deps/arco_flow_sweeper-7a33a46bc107f935)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/fingerprint_golden.rs (target/debug/deps/fingerprint_golden-054f47274180e537)

running 1 test
test golden_single_task_fingerprint_v1 ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/integration.rs (target/debug/deps/integration-767bba085837da54)

running 6 tests
test parallel_independent_tasks ... ok
test plan_fingerprint_stability ... ok
test skip_downstream_on_failure ... ok
test heartbeat_staleness_triggers_retry ... ok
test retryable_task_failure_retries_with_backoff ... ok
test full_orchestration_lifecycle ... ok

test result: ok. 6 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/orchestration_automation_tests.rs (target/debug/deps/orchestration_automation_tests-a071be0b40b82926)

running 18 tests
test test_backfill_created_uses_compact_selector ... ok
test test_backfill_state_changed_uses_state_version ... ok
test test_backfill_chunk_planned_idempotency ... ok
test test_run_requested_different_fingerprints_different_idempotency ... ok
test test_run_requested_no_run_id ... ok
test test_run_requested_idempotency_includes_fingerprint_hash ... ok
test test_run_requested_with_backfill_source ... ok
test test_backfill_events_no_run_id ... ok
test test_run_requested_stable_run_key_fingerprint_in_payload ... ok
test test_run_requested_with_manual_source ... ok
test test_schedule_ticked_event_idempotency_key ... ok
test test_schedule_ticked_event_no_run_id ... ok
test test_schedule_ticked_skipped_has_no_run_key ... ok
test test_schedule_ticked_uses_stable_ulid ... ok
test test_sensor_evaluated_no_run_id ... ok
test test_sensor_evaluated_poll_with_cas_version ... ok
test test_sensor_evaluated_poll_idempotency_uses_cursor_before ... ok
test test_sensor_evaluated_push_idempotency ... ok

test result: ok. 18 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/orchestration_correctness_tests.rs (target/debug/deps/orchestration_correctness_tests-cc1ddeaf00b4aa49)

running 12 tests
test test_task_queue_idempotency ... ok
test test_order_independence ... ok
test test_anti_entropy_recovers_orphaned_tasks ... ok
test test_controller_determinism_ready_dispatch ... ok
test test_duplicate_event_is_noop ... ok
test test_fold_run_requested_creates_run_key_index ... ok
test test_controller_determinism_dispatcher ... ok
test test_fold_run_requested_is_idempotent_on_same_fingerprint ... ok
test test_fold_run_requested_detects_conflict_on_fingerprint_mismatch ... ok
test test_dependency_correctness ... ok
test test_controller_never_reads_ledger ... ok
test test_compaction_replay_recovers_after_manifest_publish_failure ... ok

test result: ok. 12 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.01s

     Running tests/orchestration_dispatch_tests.rs (target/debug/deps/orchestration_dispatch_tests-bd23d6f8e07e9ce5)

running 1 test
test dispatch_e2e_loop_creates_outbox_and_enqueued_event ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.02s

     Running tests/orchestration_event_tests.rs (target/debug/deps/orchestration_event_tests-a33fa58d9f4e1aa3)

running 11 tests
test test_dispatch_requested_event ... ok
test test_task_heartbeat_idempotency_key_includes_timestamp ... ok
test test_event_version_is_set ... ok
test test_dispatch_enqueued_sets_correlation ... ok
test test_run_triggered_idempotency_key ... ok
test test_task_heartbeat_idempotency_key_without_timestamp ... ok
test test_task_started_includes_attempt_id ... ok
test test_timer_fired_sets_correlation_when_present ... ok
test test_timer_requested_event ... ok
test test_task_finished_with_attempt_id ... ok
test test_event_envelope_serialization ... ok

test result: ok. 11 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/orchestration_parity_gates_m1.rs (target/debug/deps/orchestration_parity_gates_m1-e0714728626b7f52)

running 8 tests
test parity_m1_schedule_ticked_idempotency_key_uses_tick_id ... ok
test parity_m1_sensor_push_dedupes_duplicate_message_delivery_in_fold ... ok
test parity_m1_duplicate_task_finished_event_is_noop ... ok
test parity_m1_schedule_tick_projection_is_idempotent_under_duplicate_delivery ... ok
test parity_m1_run_key_reservation_detects_fingerprint_conflict ... ok
test parity_m1_run_key_reservation_duplicate_returns_existing_run ... ok
test parity_m1_compactor_persists_out_of_order_dispatch_fields ... ok
test parity_m1_compactor_rejects_stale_task_finished_after_retry_started ... ok

test result: ok. 8 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.02s

     Running tests/orchestration_parity_gates_m2.rs (target/debug/deps/orchestration_parity_gates_m2-bdf0d2e9ee2cce1d)

running 11 tests
test parity_m2_poll_sensor_should_evaluate_enforces_min_interval ... ok
test parity_m2_backfill_pause_resume_cancel_transitions_are_monotonic ... ok
test parity_m2_backfill_reconcile_returns_empty_when_compaction_watermarks_are_stale ... ok
test parity_m2_retry_failed_only_targets_failed_partitions_deterministically ... ok
test parity_m2_poll_sensor_cursor_cas_accepts_matching_expected_version ... ok
test parity_m2_poll_sensor_cursor_cas_rejects_stale_expected_version ... ok
test parity_m2_backfill_plan_chunk_emits_chunk_and_run_requested_with_partition_selection ... ok
test parity_m2_schedule_disabled_emits_history_but_does_not_request_runs ... ok
test parity_m2_schedule_reconcile_emits_tick_and_run_requested_in_same_batch ... ok
test parity_m2_schedule_reconcile_is_bounded_by_max_catchup_ticks ... ok
test parity_m2_poll_sensor_cursor_and_min_interval_survive_compactor_reload ... ok

test result: ok. 11 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.02s

     Running tests/orchestration_parity_gates_m3.rs (target/debug/deps/orchestration_parity_gates_m3-71626851280f2d7a)

running 4 tests
test parity_m3_staleness_code_version_change_is_stale ... ok
test parity_m3_staleness_upstream_newer_marks_downstream_stale ... ok
test parity_m3_staleness_never_materialized_is_stale_with_reason_code ... ok
test parity_m3_global_idempotency_gate_drops_duplicate_idempotency_keys ... ok

test result: ok. 4 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/orchestration_schedule_e2e_tests.rs (target/debug/deps/orchestration_schedule_e2e_tests-a9f2b2f2b44639b6)

running 6 tests
test schedule_controller_bounded_catchup_emits_only_recent_ticks ... ok
test schedule_tick_run_correlation_survives_out_of_order_compaction ... ok
test schedule_tick_history_survives_compactor_reload_and_is_idempotent ... ok
test invalid_cron_emits_failed_tick_with_deterministic_tick_id ... ok
test disabled_schedule_emits_skipped_tick_without_run_request ... ok
test schedule_definition_version_is_snapshotted_into_ticks ... ok

test result: ok. 6 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.01s

     Running tests/orchestration_schema_contracts.rs (target/debug/deps/orchestration_schema_contracts-e8fcaf28df432fbe)

running 2 tests
test generate_golden_schemas ... ignored
test contract_orchestration_parquet_schemas_backward_compatible ... ok

test result: ok. 1 passed; 0 failed; 1 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/orchestration_schema_tests.rs (target/debug/deps/orchestration_schema_tests-ed114cc261d6df84)

running 12 tests
test test_backfill_chunk_row_schema ... ok
test test_idempotency_key_row_schema ... ok
test test_backfill_row_schema ... ok
test test_run_key_conflict_row_schema ... ok
test test_partition_status_row_schema ... ok
test test_partition_materialization_status_variants ... ok
test test_run_key_index_row_schema ... ok
test test_schedule_definition_row_schema ... ok
test test_schedule_state_row_schema ... ok
test test_schedule_tick_row_schema ... ok
test test_sensor_eval_row_schema ... ok
test test_sensor_state_row_schema ... ok

test result: ok. 12 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/orchestration_selection_tests.rs (target/debug/deps/orchestration_selection_tests-ee7a37c38e285033)

running 6 tests
test canonicalize_asset_key_accepts_dot_or_slash_formats ... ok
test canonicalize_asset_key_rejects_invalid_inputs ... ok
test selection_does_not_include_downstream_by_default ... ok
test selection_includes_downstream_only_when_explicit ... ok
test selection_includes_upstream_when_requested ... ok
test selection_fingerprint_is_order_insensitive ... ok

test result: ok. 6 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/orchestration_sensor_e2e_tests.rs (target/debug/deps/orchestration_sensor_e2e_tests-7a444ebeff0169c1)

running 6 tests
test run_key_idempotency_is_enforced_even_without_event_idempotency ... ok
test run_key_conflict_is_durable_across_compactor_reload ... ok
test push_duplicate_message_id_delivery_is_idempotent_end_to_end ... ok
test poll_error_preserves_cursor_and_min_interval_backoff_is_deterministic ... ok
test poll_cas_mismatch_noops_cursor_and_drops_run_requested_end_to_end ... ok
test poll_cursor_is_durable_across_multiple_folds_and_runs_are_deterministic ... ok

test result: ok. 6 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.02s

     Running tests/orchestration_sensor_tests.rs (target/debug/deps/orchestration_sensor_tests-4a895dd028021d50)

running 1 test
test test_sensor_eval_idempotency_dedupes_duplicate_message ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/property_tests.rs (target/debug/deps/property_tests-02031b7225959056)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

