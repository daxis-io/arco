# Batch 4 Scope Checklist (Locked)

- Source plan: `/Users/ethanurbanski/arco/.worktrees/codex-prod-go-closure-batch3/docs/plans/2025-12-22-iceberg-rest-phase-a-implementation.md`
- Source section: `Batch 4: Namespace Read Operations` (lines 165-210)
- Locked at (UTC): 2026-02-15T19:24:05Z

## Acceptance Criteria Extracted from Plan

| ID | Criterion | Source lines | Status |
|---|---|---|---|
| B4-AC1 | Implement list namespaces handler for `GET /v1/{prefix}/namespaces`. | 167-171, 177 | Present in code |
| B4-AC2 | Test list returns namespaces from catalog. | 173 | PARTIAL (status-only test exists; payload assertions missing) |
| B4-AC3 | Test pagination with `pageToken` and `pageSize`. | 174 | MISSING test coverage |
| B4-AC4 | Test parent namespace filtering (if supported). | 175 | MISSING test coverage |
| B4-AC5 | Test empty catalog returns empty list. | 176 | MISSING test coverage |
| B4-AC6 | Implement get namespace handler for `GET /v1/{prefix}/namespaces/{namespace}`. | 182-186, 192 | Present in code |
| B4-AC7 | Test get existing namespace returns properties. | 188 | MISSING dedicated test |
| B4-AC8 | Test get non-existent namespace returns 404. | 189 | MISSING dedicated test |
| B4-AC9 | Test namespace identifier is URL-decoded correctly. | 190 | MISSING dedicated test |
| B4-AC10 | Test nested namespaces decode separator correctly (`%1F`). | 191 | MISSING dedicated test |
| B4-AC11 | Implement HEAD namespace handler for `HEAD /v1/{prefix}/namespaces/{namespace}` with tests for existing/not-found/no-body. | 197-206 | PARTIAL: handler + tests exist, but success status conflict (see scope conflict) |

## Scope Conflict Requiring Clarification

1. Plan line 203 requires: "HEAD existing namespace returns 200".
2. Current branch intent and existing implementation use `204 No Content`:
   - Runtime handler returns `StatusCode::NO_CONTENT` at `/Users/ethanurbanski/arco/.worktrees/codex-prod-go-closure-batch3/crates/arco-iceberg/src/routes/namespaces.rs:317`.
   - Official Iceberg fixture expects `204` for namespace HEAD at `/Users/ethanurbanski/arco/.worktrees/codex-prod-go-closure-batch3/crates/arco-iceberg/tests/fixtures/iceberg-rest-openapi.yaml` (path `/v1/{prefix}/namespaces/{namespace}`, HEAD response section).

## BLOCKER

Cannot proceed with Batch 4 implementation assertions without explicit direction on HEAD success code policy:
- Option A: Keep spec-aligned `204` (current branch behavior).
- Option B: Change to plan literal `200` and update docs/spec/tests accordingly.
